(this["webpackJsonpfso-phonebook-react"]=this["webpackJsonpfso-phonebook-react"]||[]).push([[0],{37:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(2),a=n(14),u=n.n(a),o=n(3),s=function(e){var t=e.newName,n=e.handleNewName,r=e.newNumber,a=e.handleNewNumber,u=e.addPerson;return Object(c.jsxs)("form",{onSubmit:u,children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{value:t,onChange:n})]}),Object(c.jsxs)("div",{children:["number: ",Object(c.jsx)("input",{value:r,onChange:a})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",className:"addBtn",children:"add"})})]})},i=function(e){var t=e.filter,n=e.handleFilter;return Object(c.jsxs)("div",{className:"filter",children:["filter by name ",Object(c.jsx)("input",{value:t,onChange:n})]})},l=function(e){var t=e.name,n=e.number;return"".concat(t," ").concat(n," ")},d=function(e){var t=e.persons,n=e.handleDelete;return Object(c.jsx)("p",{children:t.map((function(e){return Object(c.jsxs)("span",{children:[Object(c.jsx)(l,{name:e.name,number:e.number}),Object(c.jsx)("button",{type:"button",onClick:function(){return n(e.id)},children:"delete"}),Object(c.jsx)("br",{})]},e.name)}))})},j=n(4),b=n.n(j),f="api/persons",h={getAll:function(){return b.a.get(f).then((function(e){return e.data}))},create:function(e){return b.a.post(f,e).then((function(e){return e.data}))},update:function(e,t){return b.a.put("".concat(f,"/").concat(e),t).then((function(e){return e.data}))},remove:function(e){return b.a.delete("".concat(f,"/").concat(e))}},m=function(e){var t=e.message;return null===t?null:t.success?Object(c.jsx)("div",{className:"success",children:t.text}):Object(c.jsx)("div",{className:"error",children:t.text})},O=function(){var e=Object(r.useState)([]),t=Object(o.a)(e,2),n=t[0],a=t[1],u=Object(r.useState)(""),l=Object(o.a)(u,2),j=l[0],b=l[1],f=Object(r.useState)(""),O=Object(o.a)(f,2),x=O[0],p=O[1],v=Object(r.useState)(""),N=Object(o.a)(v,2),w=N[0],g=N[1],k=Object(r.useState)(null),C=Object(o.a)(k,2),y=C[0],S=C[1];Object(r.useEffect)((function(){h.getAll().then((function(e){a(e)}))}),[]);var D=n.filter((function(e){return e.name.toLowerCase().includes(w.toLowerCase())}));return Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)(m,{message:y}),Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(i,{filter:w,handleFilter:function(e){g(e.target.value)}}),Object(c.jsx)("h3",{children:"add a contact"}),Object(c.jsx)(s,{newName:j,handleNewName:function(e){b(e.target.value)},newNumber:x,handleNewNumber:function(e){p(e.target.value)},addPerson:function(e){e.preventDefault();var t={name:j,number:x};n.some((function(e){return e.name===j}))?window.confirm("".concat(j," is already added to phonebook. Replace the old number?"))&&n.forEach((function(e){e.name===j&&h.update(e.id,t).then((function(t){a(n.map((function(n){return n.id!==e.id?n:t})))})).catch((function(e){S({text:e.response.data.error,success:!1}),setTimeout((function(){return S(null)}),5e3)}))})):(h.create(t).then((function(e){a(n.concat(e)),S({text:"Added ".concat(j),success:!0})})).catch((function(e){S({text:e.response.data.error,success:!1})})),setTimeout((function(){return S(null)}),5e3)),b(""),p("")}}),Object(c.jsx)("h3",{children:"contacts"}),Object(c.jsx)(d,{persons:D,handleDelete:function(e){window.confirm("Delete?")&&h.remove(e).then((function(){return a(n.filter((function(t){return t.id!==e})))})).catch((function(){S({text:"Could not delete. Try again",success:!1}),setTimeout((function(){return S(null)}),5e3)}))}})]})};n(37);u.a.render(Object(c.jsx)(O,{}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.34952b40.chunk.js.map